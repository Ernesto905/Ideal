{% extends 'base.html' %}

{% block content %}
<style>
  .typewriter h1 {
    color: #28a745;
    overflow: hidden;
    border-right: 0.15em solid #28a745;
    white-space: nowrap;
    margin: 0 auto;
    animation: typing 1.0s steps(30, end), blink-caret 0.8s step-end infinite;
  }

  @keyframes typing {
    from {
      width: 0;
    }
    to {
      width: 100%;
    }
  }

  @keyframes blink-caret {
    from,
    to {
      border-color: transparent;
    }
    50% {
      border-color: black;
    }
  }
  .card {
    border: none;
  }


  .form-label {
    font-weight: bold;
  }

  .form-control {
    border-radius: 5px;
  }

  .btn-primary {
    background-color: #28a745;
    border-color: #28a745;
  }

  .btn-primary:hover {
    background-color: #218838;
    border-color: #1e7e34;
  }

  .fade-in {
    opacity: 0;
    animation: fadeInAnimation 1s ease-in forwards;
  }

  @keyframes fadeInAnimation {
    from {
      opacity: 0;
      transform: translateY(-20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  .goal-card {
    cursor: pointer;
    transition: transform 0.3s, box-shadow 0.3s;
  }

  .goal-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
  }

  .goal-card input[type="radio"] {
    display: none;
  }

  .goal-card input[type="radio"]:checked + .card {
    border-color: #007bff;
    box-shadow: 0 0 0 2px #007bff;
  }
</style>
<div class="row justify-content-center">
  <div class="col-md-8">
    <div class="card">
      <div class="card-body">
        <form id="builderForm" action="/builder" method="POST">

          <div class="step" id="step1">
            <div class="d-flex justify-content-center">
              <div class="typewriter">
                <h1>Step 1: All about you</h1>
              </div>
            </div>
            <div id="letsWorkOn" style="display: none;">
              <div class="mb-3">
                <label for="age" class="form-label">Age</label>
                <input type="text" class="form-control" id="age" name="age" required>
              </div>
              <div class="mb-3">
                <label for="height" class="form-label">Height (cm)</label>
                <input type="text" class="form-control" id="height" name="height" required>
              </div>
              <div class="mb-3 ">
                <label for="current_weight" class="form-label">Current Weight (lb)</label>
                <input type="text" class="form-control" id="current_weight" name="current_weight" required>
              </div>

              <div class="mb-3 ">
                <label for="sex" class="form-label">Sex</label>
                <select class="form-select" id="sex" name="sex" required>
                  <option value="">Select an option</option>
                  <option>Male</option>
                  <option>Female</option>
                </select>
              </div>

              <div class="mb-3">
                <div class="row">

                  <div class="col">
                    <label for="allergies" class="form-label">Allergies</label>
                    <select class="form-control" id="allergies" name="allergies">
                      <option value="">Select an allergy</option>
                      <option value="Dairy">Dairy</option>
                      <option value="Egg">Egg</option>
                      <option value="Gluten">Gluten</option>
                      <option value="Grain">Grain</option>
                      <option value="Peanut">Peanut</option>
                      <option value="Seafood">Seafood</option>
                      <option value="Sesame">Sesame</option>
                      <option value="Shellfish">Shellfish</option>
                      <option value="Soy">Soy</option>
                      <option value="Sulfite">Sulfite</option>
                      <option value="Tree Nut">Tree Nut</option>
                      <option value="Wheat">Wheat</option>
                    </select>
                  </div>

                  <div class="col">
                    <label for="diet" class="form-label">Present diet</label>
                    <select class="form-control" id="diet" name="diet">
                      <option value="">Select a diet</option>
                      <option value="Gluten Free">Gluten Free</option>
                      <option value="Ketogenic">Ketogenic</option>
                      <option value="Vegetarian">Vegetarian</option>
                      <option value="Lacto-Vegetarian">Lacto-Vegetarian</option>
                      <option value="Ovo-Vegetarian">Ovo-Vegetarian</option>
                      <option value="Vegan">Vegan</option>
                      <option value="Pescetarian">Pescetarian</option>
                      <option value="Paleo">Paleo</option>
                      <option value="Primal">Primal</option>
                      <option value="Whole30">Whole30</option>
                    </select>
                  </div>

                </div>
              </div>
              <div class="mb-3 ">
                <label for="religion" class="form-label">Religion</label>
                <input type="text" class="form-control" id="religion" name="religion">
              </div>
              <div class="mb-3 ">
                <label for="physical_impediments" class="form-label">Physical Impediments</label>
                <input type="text" class="form-control" id="physical_impediments" name="physical_impediments">
              </div>
            <button type="button" class="btn btn-primary next-btn" disabled>Next</button>
            </div>
          </div>
          <div class="step" id="step2" style="display: none;">
            <div class="d-flex justify-content-center">
              <div class="typewriter">
                <h1>Step 2: Where you need to be</h1>
              </div>
            </div>
            <div id="letsWorkOn2" style="display: none;">
              <div class="mb-3 ">
                <label for="ideal_weight" class="form-label">Ideal Weight</label>
                <input type="text" class="form-control" id="ideal_weight" name="ideal_weight" required>
              </div>
              <div class="mb-3">
                <label class="form-label">Personal fitness goals</label>
                <div class="row">
                  <div class="col-md-4 mb-3">
                    <label class="goal-card">
                      <input type="radio" id="body_goal" name="body_goal" value="Trim Excess Fat" required>
                      <div class="card h-100">
                        <div class="card-body">
                          <h5 class="card-title">Trim excess fat</h5>
                          <p class="card-text">Achieve a leaner physique and improve overall body composition.</p>
                        </div>
                      </div>
                    </label>
                  </div>
                  <div class="col-md-4 mb-3">
                    <label class="goal-card">
                      <input type="radio" id="body_goal" name="body_goal" value="Build Lean Mass" required>
                      <div class="card h-100">
                        <div class="card-body">
                          <h5 class="card-title">Build Lean Mass</h5>
                          <p class="card-text">Gain muscle mass while minimizing fat gain for a stronger, more defined physique.</p>
                        </div>
                      </div>
                    </label>
                  </div>
                  <div class="col-md-4 mb-3">
                    <label class="goal-card">
                      <input type="radio" id="body_goal" name="body_goal" value="Increase Strength" required>
                      <div class="card h-100">
                        <div class="card-body">
                          <h5 class="card-title">Increase Strength</h5>
                          <p class="card-text">Focus on increasing overall strength and power through resistance training.</p>
                        </div>
                      </div>
                    </label>
                  </div>
                  <div class="col-md-4 mb-3">
                    <label class="goal-card">
                      <input type="radio" id="body_goal" name="body_goal" value="Improve Endurance" required>
                      <div class="card h-100">
                        <div class="card-body">
                          <h5 class="card-title">Improve Endurance</h5>
                          <p class="card-text">Enhance cardiovascular fitness and stamina for better performance in endurance activities.</p>
                        </div>
                      </div>
                    </label>
                  </div>
                  <div class="col-md-4 mb-3">
                    <label class="goal-card">
                      <input type="radio" id="body_goal" name="body_goal" value="Boost Overall Fitness" required>
                      <div class="card h-100">
                        <div class="card-body">
                          <h5 class="card-title">Boost Overall Fitness</h5>
                          <p class="card-text">Improve overall fitness level through a combination of strength training, cardio, and flexibility exercises.</p>
                        </div>
                      </div>
                    </label>
                  </div>
                </div>
              </div>

              <button type="button" class="btn btn-secondary prev-btn">Previous</button>
              <button type="submit" class="btn btn-primary" disabled>Submit</button>
            </div>
          </div>
        </form>
        <div id="letsWorkOn" style="display: none;">
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    const step1 = document.getElementById('step1');
    const step2 = document.getElementById('step2');
    const nextBtn = document.querySelector('.next-btn');
    const prevBtn = document.querySelector('.prev-btn');
    const submitBtn = document.querySelector('button[type="submit"]');

    function checkStep1Fields() {
      const age = document.getElementById('age').value;
      const height = document.getElementById('height').value;
      const currentWeight = document.getElementById('current_weight').value;
      const sex = document.getElementById('sex').value;


      if (age && currentWeight && sex && height) {
        nextBtn.disabled = false;
      } else {
        nextBtn.disabled = true;
      }
    }

    function checkStep2Fields() {
      const idealWeight = document.getElementById('ideal_weight').value;
      const bodyComposition = document.getElementById('body_goal').value;

      if (idealWeight && bodyComposition) {
        submitBtn.disabled = false;
      } else {
        submitBtn.disabled = true;
      }
    }

    step1.addEventListener('input', checkStep1Fields);
    step2.addEventListener('input', checkStep2Fields);

    nextBtn.addEventListener('click', function () {
      step1.style.display = 'none';
      step2.style.display = 'block';
    });

    prevBtn.addEventListener('click', function () {
      step2.style.display = 'none';
      step1.style.display = 'block';
    });

    setTimeout(function () {
      document.getElementById('letsWorkOn').style.display = 'block';
      document.getElementById('letsWorkOn').classList.add('fade-in');
    }, 1100);
    setTimeout(function () {
      document.getElementById('letsWorkOn2').style.display = 'block';
      document.getElementById('letsWorkOn2').classList.add('fade-in');
    }, 1100);
  });
</script>
{% endblock %}

